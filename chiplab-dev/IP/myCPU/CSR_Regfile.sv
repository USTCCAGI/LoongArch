// Generated by CIRCT firtool-1.62.0
module CSR_Regfile(
  input         clock,
                reset,
  input  [13:0] io_raddr,
  output [31:0] io_rdata,
  input  [13:0] io_waddr,
  input         io_we,
  input  [31:0] io_wdata,
  input  [7:0]  io_exception,
  input  [31:0] io_badv_exp,
  input         io_is_eret,
  input  [31:0] io_pc_exp,
  output [31:0] io_eentry_global,
                io_tlbreentry_global,
  output [11:0] io_interrupt_vec,
  output [9:0]  io_asid_global,
  output [1:0]  io_plv_global,
  output [18:0] io_tlbehi_global,
  output [3:0]  io_tlbidx_global,
  output [5:0]  io_crmd_trans,
  output [31:0] io_dmw0_global,
                io_dmw1_global,
  output [18:0] io_tlbentry_global_vppn,
  output [5:0]  io_tlbentry_global_ps,
  output        io_tlbentry_global_g,
  output [9:0]  io_tlbentry_global_asid,
  output        io_tlbentry_global_e,
  output [19:0] io_tlbentry_global_ppn0,
  output [1:0]  io_tlbentry_global_plv0,
                io_tlbentry_global_mat0,
  output        io_tlbentry_global_d0,
                io_tlbentry_global_v0,
  output [19:0] io_tlbentry_global_ppn1,
  output [1:0]  io_tlbentry_global_plv1,
                io_tlbentry_global_mat1,
  output        io_tlbentry_global_d1,
                io_tlbentry_global_v1,
  input  [18:0] io_tlbentry_in_vppn,
  input  [5:0]  io_tlbentry_in_ps,
  input         io_tlbentry_in_g,
  input  [9:0]  io_tlbentry_in_asid,
  input         io_tlbentry_in_e,
  input  [19:0] io_tlbentry_in_ppn0,
  input  [1:0]  io_tlbentry_in_plv0,
                io_tlbentry_in_mat0,
  input         io_tlbentry_in_d0,
                io_tlbentry_in_v0,
  input  [19:0] io_tlbentry_in_ppn1,
  input  [1:0]  io_tlbentry_in_plv1,
                io_tlbentry_in_mat1,
  input         io_tlbentry_in_d1,
                io_tlbentry_in_v1,
                io_tlbrd_en,
                io_tlbsrch_en,
  output        io_llbit_global,
  input         io_llbit_set,
                io_llbit_clear,
  output [12:0] io_estat_13
);

  reg  [31:0] estat;
  reg  [31:0] crmd;
  reg  [31:0] prmd;
  reg  [31:0] euen;
  reg  [31:0] ecfg;
  reg         timer_reg;
  reg  [31:0] era;
  reg  [31:0] badv;
  reg  [31:0] eentry;
  reg  [31:0] coreid;
  reg  [31:0] data0;
  reg  [31:0] data1;
  reg  [31:0] data2;
  reg  [31:0] data3;
  reg  [31:0] llbctl;
  reg  [31:0] tlbidx;
  reg  [31:0] tlbehi;
  reg  [31:0] tlbelo0;
  reg  [31:0] tlbelo1;
  reg  [31:0] asid;
  reg  [31:0] pgdl;
  reg  [31:0] pgdh;
  reg  [31:0] pgd;
  reg  [31:0] tlbreentry;
  reg  [31:0] dmw0;
  reg  [31:0] dmw1;
  reg  [31:0] tid;
  reg  [31:0] tcfg;
  reg  [31:0] tval;
  reg  [31:0] tval_edge;
  wire [31:0] _GEN = io_raddr == 14'h42 ? tval : 32'h0;
  wire [31:0] _GEN_0 = io_raddr == 14'h41 ? tcfg : _GEN;
  wire [31:0] _GEN_1 = io_raddr == 14'h40 ? tid : _GEN_0;
  wire [31:0] _GEN_2 = io_raddr == 14'h181 ? dmw1 : _GEN_1;
  wire [31:0] _GEN_3 = io_raddr == 14'h180 ? dmw0 : _GEN_2;
  wire [31:0] _GEN_4 = io_raddr == 14'h88 ? tlbreentry : _GEN_3;
  wire [31:0] _GEN_5 = io_raddr == 14'h1B ? pgd : _GEN_4;
  wire [31:0] _GEN_6 = io_raddr == 14'h1A ? pgdh : _GEN_5;
  wire [31:0] _GEN_7 = io_raddr == 14'h19 ? pgdl : _GEN_6;
  wire [31:0] _GEN_8 = io_raddr == 14'h18 ? asid : _GEN_7;
  wire [31:0] _GEN_9 = io_raddr == 14'h13 ? tlbelo1 : _GEN_8;
  wire [31:0] _GEN_10 = io_raddr == 14'h12 ? tlbelo0 : _GEN_9;
  wire [31:0] _GEN_11 = io_raddr == 14'h11 ? tlbehi : _GEN_10;
  wire [31:0] _GEN_12 = io_raddr == 14'h10 ? tlbidx : _GEN_11;
  wire [31:0] _GEN_13 = io_raddr == 14'h60 ? llbctl : _GEN_12;
  wire [31:0] _GEN_14 = io_raddr == 14'h33 ? data3 : _GEN_13;
  wire [31:0] _GEN_15 = io_raddr == 14'h32 ? data2 : _GEN_14;
  wire [31:0] _GEN_16 = io_raddr == 14'h31 ? data1 : _GEN_15;
  wire [31:0] _GEN_17 = io_raddr == 14'h30 ? data0 : _GEN_16;
  wire [31:0] _GEN_18 = io_raddr == 14'h20 ? coreid : _GEN_17;
  wire [31:0] _GEN_19 = io_raddr == 14'hC ? eentry : _GEN_18;
  wire [31:0] _GEN_20 = io_raddr == 14'h7 ? badv : _GEN_19;
  wire [31:0] _GEN_21 = io_raddr == 14'h6 ? era : _GEN_20;
  wire [31:0] _GEN_22 = io_raddr == 14'h5 ? estat : _GEN_21;
  wire [31:0] _GEN_23 = io_raddr == 14'h4 ? ecfg : _GEN_22;
  wire [31:0] _GEN_24 = io_raddr == 14'h2 ? euen : _GEN_23;
  wire [31:0] _GEN_25 = io_raddr == 14'h1 ? prmd : _GEN_24;
  wire [1:0]  _crmd_T_7 = (&(estat[21:16])) ? 2'h2 : crmd[4:3];
  wire [30:0] _GEN_26 =
    io_we & io_waddr == 14'h5
      ? {estat[30:16], 4'h0, timer_reg, 9'h0, io_wdata[1:0]}
      : {estat[30:16], 4'h0, timer_reg, 9'h0, estat[1:0]};
  wire [5:0]  _tlbidx_T_8 = io_tlbentry_in_e ? io_tlbentry_in_ps : 6'h0;
  wire [9:0]  _asid_T_1 = io_tlbentry_in_e ? io_tlbentry_in_asid : 10'h0;
  wire [29:0] _tval_T_6 = tcfg[1] ? {tcfg[29:2], 2'h1} : 30'h0;
  wire        is_tlbr = io_exception[6:0] == 7'h3F;
  wire        vp_save = is_tlbr | (|(io_exception[6:0])) & io_exception[6:0] < 7'h8;
  wire        _GEN_27 = tval == 32'h0;
  wire [1:0]  _crmd_T_2 = is_tlbr ? 2'h1 : crmd[4:3];
  always @(posedge clock) begin
    if (reset) begin
      estat <= 32'h0;
      crmd <= 32'h8;
      prmd <= 32'h0;
      euen <= 32'h0;
      ecfg <= 32'h0;
      timer_reg <= 1'h0;
      era <= 32'h0;
      badv <= 32'h0;
      eentry <= 32'h0;
      coreid <= 32'h0;
      data0 <= 32'h0;
      data1 <= 32'h0;
      data2 <= 32'h0;
      data3 <= 32'h0;
      llbctl <= 32'h0;
      tlbidx <= 32'h0;
      tlbehi <= 32'h0;
      tlbelo0 <= 32'h0;
      tlbelo1 <= 32'h0;
      asid <= 32'h0;
      pgdl <= 32'h0;
      pgdh <= 32'h0;
      pgd <= 32'h0;
      tlbreentry <= 32'h0;
      dmw0 <= 32'h0;
      dmw1 <= 32'h0;
      tid <= 32'h0;
      tcfg <= 32'h0;
      tval <= 32'h0;
    end
    else begin
      if (io_exception[7]) begin
        estat <= {9'h0, io_exception[6:0], estat[15:0]};
        crmd <= {crmd[31:5], _crmd_T_2, 3'h0};
        prmd <= {prmd[31:3], crmd[2:0]};
        era <= io_pc_exp;
      end
      else begin
        estat <= {1'h0, _GEN_26};
        if (io_is_eret)
          crmd <= {crmd[31:5], _crmd_T_7, prmd[2:0]};
        else if (io_we & io_waddr == 14'h0)
          crmd <= {23'h0, io_wdata[8:0]};
        if (io_we & io_waddr == 14'h1)
          prmd <= {29'h0, io_wdata[2:0]};
        if (io_we & io_waddr == 14'h6)
          era <= io_wdata;
      end
      if (io_we & io_waddr == 14'h2)
        euen <= {31'h0, io_wdata[0]};
      if (io_we & io_waddr == 14'h4)
        ecfg <= {19'h0, io_wdata[12:11], 1'h0, io_wdata[9:0]};
      timer_reg <=
        ~(io_we & io_waddr == 14'h44 & io_wdata[0])
        & (tcfg[0] & _GEN_27 & tval_edge == 32'h1 | timer_reg);
      if (io_exception[7]
          & (vp_save | io_exception[5:0] == 6'h8 | io_exception[6:0] == 7'h9))
        badv <= io_badv_exp;
      else if (io_we & io_waddr == 14'h7)
        badv <= io_wdata;
      if (io_we & io_waddr == 14'hC)
        eentry <= {io_wdata[31:6], 6'h0};
      if (io_we & io_waddr == 14'h20)
        coreid <= {23'h0, coreid[8:0]};
      if (io_we & io_waddr == 14'h30)
        data0 <= io_wdata;
      if (io_we & io_waddr == 14'h31)
        data1 <= io_wdata;
      if (io_we & io_waddr == 14'h32)
        data2 <= io_wdata;
      if (io_we & io_waddr == 14'h33)
        data3 <= io_wdata;
      if (io_llbit_set)
        llbctl <= {29'h0, llbctl[2], 2'h1};
      else if (io_llbit_clear)
        llbctl <= {29'h0, llbctl[2], 2'h0};
      else if (io_is_eret)
        llbctl <= {31'h0, llbctl[2] & llbctl[0]};
      else if (io_we & io_waddr == 14'h60)
        llbctl <= {29'h0, io_wdata[2], 1'h0, ~(io_wdata[1]) & llbctl[0]};
      if (io_tlbsrch_en) begin
        if (io_wdata[4])
          tlbidx <= {1'h0, tlbidx[30:4], io_wdata[3:0]};
        else
          tlbidx <= {1'h1, tlbidx[30:0]};
      end
      else if (io_tlbrd_en)
        tlbidx <= {~io_tlbentry_in_e, 1'h0, _tlbidx_T_8, tlbidx[23:0]};
      else if (io_we & io_waddr == 14'h10)
        tlbidx <= {io_wdata[31], 1'h0, io_wdata[29:24], 20'h0, io_wdata[3:0]};
      if (io_exception[7] & vp_save)
        tlbehi <= {io_badv_exp[31:13], 13'h0};
      else if (io_tlbrd_en)
        tlbehi <= io_tlbentry_in_e ? {io_tlbentry_in_vppn, 13'h0} : 32'h0;
      else if (io_we & io_waddr == 14'h11)
        tlbehi <= {io_wdata[31:13], 13'h0};
      if (io_tlbrd_en) begin
        if (io_tlbentry_in_e) begin
          tlbelo0 <=
            {tlbelo0[31:28],
             io_tlbentry_in_ppn0,
             1'h0,
             io_tlbentry_in_g,
             io_tlbentry_in_mat0,
             io_tlbentry_in_plv0,
             io_tlbentry_in_d0,
             io_tlbentry_in_v0};
          tlbelo1 <=
            {tlbelo1[31:28],
             io_tlbentry_in_ppn1,
             1'h0,
             io_tlbentry_in_g,
             io_tlbentry_in_mat1,
             io_tlbentry_in_plv1,
             io_tlbentry_in_d1,
             io_tlbentry_in_v1};
        end
        else begin
          tlbelo0 <= 32'h0;
          tlbelo1 <= 32'h0;
        end
        asid <= {asid[31:10], _asid_T_1};
      end
      else begin
        if (io_we & io_waddr == 14'h12)
          tlbelo0 <= {4'h0, io_wdata[27:8], 1'h0, io_wdata[6:0]};
        if (io_we & io_waddr == 14'h13)
          tlbelo1 <= {4'h0, io_wdata[27:8], 1'h0, io_wdata[6:0]};
        if (io_we & io_waddr == 14'h18)
          asid <= {22'h0, io_wdata[9:0]};
      end
      if (io_we & io_waddr == 14'h19)
        pgdl <= {io_wdata[31:12], 12'h0};
      if (io_we & io_waddr == 14'h1A)
        pgdh <= {io_wdata[31:12], 12'h0};
      if (io_we & io_waddr == 14'h1B)
        pgd <= {io_wdata[31:12], 12'h0};
      if (io_we & io_waddr == 14'h88)
        tlbreentry <= {io_wdata[31:6], 6'h0};
      if (io_we & io_waddr == 14'h180)
        dmw0 <=
          {io_wdata[31:29],
           1'h0,
           io_wdata[27:25],
           19'h0,
           io_wdata[5:3],
           2'h0,
           io_wdata[0]};
      if (io_we & io_waddr == 14'h181)
        dmw1 <=
          {io_wdata[31:29],
           1'h0,
           io_wdata[27:25],
           19'h0,
           io_wdata[5:3],
           2'h0,
           io_wdata[0]};
      if (io_we & io_waddr == 14'h40)
        tid <= io_wdata;
      if (io_we & io_waddr == 14'h41) begin
        tcfg <= {2'h0, io_wdata[29:0]};
        tval <= {2'h0, io_wdata[29:2], 2'h1};
      end
      else if (tcfg[0]) begin
        if (_GEN_27)
          tval <= {2'h0, _tval_T_6};
        else
          tval <= 32'(tval - 32'h1);
      end
    end
    tval_edge <= tval;
  end // always @(posedge)
  assign io_rdata = io_raddr == 14'h0 ? crmd : _GEN_25;
  assign io_eentry_global = eentry;
  assign io_tlbreentry_global = tlbreentry;
  assign io_interrupt_vec =
    crmd[2] ? {estat[12:11] & ecfg[12:11], estat[9:0] & ecfg[9:0]} : 12'h0;
  assign io_asid_global = asid[9:0];
  assign io_plv_global = crmd[1:0];
  assign io_tlbehi_global = tlbehi[31:13];
  assign io_tlbidx_global = tlbidx[3:0];
  assign io_crmd_trans = crmd[8:3];
  assign io_dmw0_global = dmw0;
  assign io_dmw1_global = dmw1;
  assign io_tlbentry_global_vppn = tlbehi[31:13];
  assign io_tlbentry_global_ps = tlbidx[29:24];
  assign io_tlbentry_global_g = tlbelo0[6] & tlbelo1[6];
  assign io_tlbentry_global_asid = asid[9:0];
  assign io_tlbentry_global_e = (&(estat[21:16])) | ~(tlbidx[31]);
  assign io_tlbentry_global_ppn0 = tlbelo0[27:8];
  assign io_tlbentry_global_plv0 = tlbelo0[3:2];
  assign io_tlbentry_global_mat0 = tlbelo0[5:4];
  assign io_tlbentry_global_d0 = tlbelo0[1];
  assign io_tlbentry_global_v0 = tlbelo0[0];
  assign io_tlbentry_global_ppn1 = tlbelo1[27:8];
  assign io_tlbentry_global_plv1 = tlbelo1[3:2];
  assign io_tlbentry_global_mat1 = tlbelo1[5:4];
  assign io_tlbentry_global_d1 = tlbelo1[1];
  assign io_tlbentry_global_v1 = tlbelo1[0];
  assign io_llbit_global = llbctl[0];
  assign io_estat_13 = estat[12:0];
endmodule

